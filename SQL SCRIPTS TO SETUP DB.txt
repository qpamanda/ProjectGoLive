---------------------
-- Create Database --
---------------------
CREATE DATABASE dbProject;


-------------------
-- Use Database --
-------------------
USE dbProject;


-------------------
-- Create Tables --
-------------------
CREATE TABLE `Representatives` (
  `RepID` int NOT NULL,
  `UserName` varchar(25) NOT NULL,
  `Password` varchar(25) NOT NULL,
  `FirstName` varchar(45) DEFAULT NULL,
  `LastName` varchar(45) DEFAULT NULL,
  `Email` varchar(256) DEFAULT NULL,
  `ContactNo` varchar(20) DEFAULT NULL,
  `Organisation` varchar(256) DEFAULT NULL,
  `CurrentLogin_dt` datetime DEFAULT NULL,
  `LastLogin_dt` datetime DEFAULT NULL,
  `CreatedBy` varchar(25) DEFAULT NULL,
  `Created_dt` datetime DEFAULT NULL,
  `LastModifiedBy` varchar(25) DEFAULT NULL,
  `LastModified_dt` datetime DEFAULT NULL,
  PRIMARY KEY (`RepID`),
  UNIQUE KEY `RepID_UNIQUE` (`RepID`),
  UNIQUE KEY `UserName_UNIQUE` (`UserName`)
); 



CREATE TABLE `RepMemberType` (
  `RepID` int NOT NULL,
  `MemberTypeID` int NOT NULL,
  `CreatedBy` varchar(25) DEFAULT NULL,
  `Created_dt` datetime DEFAULT NULL,
  `LastModifiedBy` varchar(25) DEFAULT NULL,
  `LastModified_dt` datetime DEFAULT NULL,
  PRIMARY KEY (`RepID`,`MemberTypeID`)
);

CREATE TABLE `Recipients` (
  `RecipientID` INT NOT NULL AUTO_INCREMENT,
  `RepID_FK` INT NOT NULL,
  `Name` VARCHAR(45) NOT NULL,
  `Category` TINYINT NOT NULL,
  `Profile` MEDIUMTEXT NOT NULL,
  `ContactNo` VARCHAR(20) NOT NULL,
  `CreatedDT` DATETIME NOT NULL,
  `LastModifiedDT` DATETIME NOT NULL,
  PRIMARY KEY (`RecipientID`),
  UNIQUE INDEX `RecipientID_UNIQUE` (`RecipientID` ASC) VISIBLE,
  INDEX `RepID_idx` (`RepID_FK` ASC) VISIBLE,
  CONSTRAINT `RepID`
    FOREIGN KEY (`RepID_FK`)
    REFERENCES `dbProject`.`Representatives` (`RepID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
    );

CREATE TABLE `Requests` (
  `RequestID` INT NOT NULL AUTO_INCREMENT,
  `RepID_FK` INT NOT NULL,
  `CategoryID` TINYINT NOT NULL,
  `RecipientID_FK` INT NOT NULL,
  `RequestStatusCode` TINYINT NOT NULL,
  `RequestDescription` MEDIUMTEXT NOT NULL,
  `ToCompleteBy` DATETIME NOT NULL,
  `FulfillAt` TEXT NOT NULL,
  `CreatedBy` TEXT NOT NULL,
  `CreatedDT` DATETIME NOT NULL,
  `LastModifiedBy` TEXT NOT NULL,
  `LastModifiedDT` DATETIME NOT NULL,
  PRIMARY KEY (`RequestID`),
  UNIQUE INDEX `RequestID_UNIQUE` (`RequestID` ASC) VISIBLE,
  INDEX `RepID_idx` (`RepID_FK` ASC) VISIBLE,
  INDEX `RecipientID_idx` (`RecipientID_FK` ASC) VISIBLE,
  CONSTRAINT `Requests_Representatives_RepID`
    FOREIGN KEY (`RepID_FK`)
    REFERENCES `dbProject`.`Representatives` (`RepID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Requests_Recipients_RecipientID`
    FOREIGN KEY (`RecipientID_FK`)
    REFERENCES `dbProject`.`Recipients` (`RecipientID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
);




-----------
-- Adhoc --
-----------
DROP TABLE [TABLE_NAME];


